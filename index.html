<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–∞–∫–∞–∑ —Ä–∞–±–æ—Ç—ã @awarem</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #ffffff; --sec-bg: #f4f4f5; --text: #000000; --hint: #707579;
            --card-border: rgba(0,0,0,0.1); --accent: #3390ec; --accent-red: #ff3b30; --accent-green: #34c759;
            --toggle-off: #dee2e6;
        }
        [data-theme="dark"] {
            --bg: #1c1c1d; --sec-bg: #2c2c2e; --text: #ffffff; --hint: #8e8e93; 
            --card-border: rgba(255,255,255,0.1); --toggle-off: #3a3a3c;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg); color: var(--text); margin: 0; padding: 16px;
            display: flex; flex-direction: column; gap: 12px; transition: 0.3s;
        }

        .header-row { display: flex; align-items: center; gap: 10px; margin-bottom: 4px; }
        .theme-toggle {
            background: var(--sec-bg); border: 1px solid var(--card-border); 
            border-radius: 50%; width: 42px; height: 42px;
            display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0;
        }

        .card { background: var(--sec-bg); border-radius: 16px; padding: 14px; border: 1px solid var(--card-border); }
        label { font-size: 10px; color: var(--hint); font-weight: 800; text-transform: uppercase; margin-bottom: 6px; display: block; }
        
        input, select, textarea {
            background: var(--bg); border: 1px solid var(--card-border); border-radius: 10px;
            color: var(--text); font-size: 16px; padding: 10px; width: 100%; box-sizing: border-box; outline: none;
        }

        .input-wrapper { position: relative; display: flex; align-items: center; width: 100%; }
        .inner-tip {
            position: absolute; right: 8px; color: var(--accent); font-weight: 700;
            background: var(--sec-bg); width: 24px; height: 24px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-size: 13px;
            cursor: pointer; border: 1px solid var(--card-border); z-index: 2;
        }

        .row { display: flex; gap: 10px; align-items: flex-end; }
        .flex-1 { flex: 1; }

        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent-green); }
        .dot-online { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(0.9); opacity: 1; } 70% { transform: scale(1.2); opacity: 0.5; } 100% { transform: scale(0.9); opacity: 1; } }

        .main-btn { background: var(--accent); color: white; border: none; padding: 16px; border-radius: 14px; font-size: 16px; font-weight: 700; width: 100%; cursor: pointer; margin-top: 4px; }
        .secondary-btn { background: var(--sec-bg); border: 1px solid var(--card-border); color: var(--accent); padding: 11px; border-radius: 12px; font-size: 13px; font-weight: 600; text-align: center; flex: 1; cursor: pointer; }
        
        .preview-box { background: var(--sec-bg); border: 1px dashed var(--hint); border-radius: 12px; padding: 12px; font-family: monospace; font-size: 12px; white-space: pre-line; display: none; margin: 10px 0; border: 1px solid var(--accent); }
        .preview-box.show { display: block; }

        .switch-row { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 12px 14px;
        }
        .switch-row span { 
            line-height: 22px; 
            display: block;
        }
        .switch { position: relative; display: inline-block; width: 40px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--toggle-off); transition: .3s; border-radius: 22px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .3s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--accent-green); }
        input:checked + .slider:before { transform: translateX(18px); }

        .advantage-item { text-align: center; flex: 1; }
        .advantage-icon { font-size: 20px; }
        .advantage-text { font-size: 9px; font-weight: 700; color: var(--hint); text-transform: uppercase; }
        
        /* –£–º–µ–Ω—å—à–µ–Ω–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ margin-top */
        .version-footer { font-size: 10px; color: var(--hint); text-align: center; margin-top: 4px; opacity: 0.5; font-weight: 600; letter-spacing: 0.5px; }
        .disclaimer { font-size: 10px; color: var(--hint); text-align: center; line-height: 1.4; }
    </style>
</head>
<body>

<div class="header-row">
    <div class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/txtandpptx')">üì¢ –ö–∞–Ω–∞–ª</div>
    <div class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/OTZblBblawarem')">‚≠ê –û—Ç–∑—ã–≤—ã</div>
    <div class="theme-toggle" onclick="toggleTheme()" id="theme-btn">‚òÄÔ∏è</div>
</div>

<div class="card" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 14px;">
    <div style="display: flex; align-items: center; gap: 8px;">
        <div id="status-dot" class="status-dot dot-online"></div>
        <span id="status-text" style="font-size: 12px; font-weight: 800; text-transform: uppercase; color: var(--accent-green);">–°—Ç–∞—Ç—É—Å: –°–≤–æ–±–æ–¥–µ–Ω</span>
    </div>
    <span id="response-time" style="font-size: 11px; color: var(--hint);">–û—Ç–≤–µ—Ç: 5-10 –º–∏–Ω</span>
</div>

<div style="display: flex; justify-content: space-around; gap: 8px;">
    <div class="advantage-item"><div class="advantage-icon">‚ö°Ô∏è</div><div class="advantage-text">–ë—ã—Å—Ç—Ä–æ</div></div>
    <div class="advantage-item"><div class="advantage-icon">üíé</div><div class="advantage-text">–ö–∞—á–µ—Å—Ç–≤–æ</div></div>
    <div class="advantage-item"><div class="advantage-icon">üïí</div><div class="advantage-text">24/7</div></div>
</div>

<div class="card">
    <label>–í–∏–¥ —Ä–∞–±–æ—Ç—ã</label>
    <select id="type" oninput="update()">
        <option value="–†–µ—Ñ–µ—Ä–∞—Ç">üìù –†–µ—Ñ–µ—Ä–∞—Ç</option>
        <option value="–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è">üìä –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è</option>
        <option value="–î–æ–∫–ª–∞–¥">üé§ –î–æ–∫–ª–∞–¥</option>
        <option value="–ü—Ä–æ–µ–∫—Ç">üí° –ü—Ä–æ–µ–∫—Ç</option>
        <option value="–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–µ–∫—Ü–∏—é">üñã –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–µ–∫—Ü–∏—é</option>
    </select>
    
    <div class="row" style="margin-top:12px">
        <div class="flex-1">
            <label id="unit-label">–ö–æ–ª-–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü</label>
            <input type="number" id="count" placeholder="0" oninput="update()">
        </div>
        <div class="flex-1">
            <label>–î–µ–¥–ª–∞–π–Ω</label>
            <div class="input-wrapper">
                <input type="text" id="date" maxlength="5" oninput="update()">
                <div class="inner-tip" onclick="showTip('deadline')">?</div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <label>–î–µ—Ç–∞–ª–∏ –∏ –±—é–¥–∂–µ—Ç</label>
    <textarea id="details" rows="2" placeholder="–¢–µ–º–∞, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ..." oninput="update()"></textarea>
    <div style="margin-top:12px">
        <label>–°—É–º–º–∞ (‚ÇΩ)</label>
        <input type="text" id="price" placeholder="500" oninput="update()">
    </div>
</div>

<div class="card switch-row">
    <span style="font-size: 14px; font-weight: 700;">üö® –°—Ä–æ—á–Ω—ã–π –∑–∞–∫–∞–∑</span>
    <label class="switch">
        <input type="checkbox" id="urgent" onchange="update()">
        <span class="slider"></span>
    </label>
</div>

<div class="preview-box" id="preview"></div>
<button class="main-btn" onclick="checkSubAndCopy()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∫–µ—Ç—É</button>

<div class="row">
    <button class="secondary-btn" style="color:var(--accent-red)" onclick="clearAll()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
    <button class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/OTZblBblawarem')">‚≠ê –û—Ç–∑—ã–≤</button>
</div>

<div class="disclaimer">
    üí≥ <b>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 100%</b> | ‚úÖ –ë–µ–∑ –∞–Ω—Ç–∏–ø–ª–∞–≥–∏–∞—Ç–∞<br>
    –†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –≤–∞—à–∏–º –¥–µ—Ç–∞–ª—è–º.
</div>
<div class="version-footer">BETA 0.24</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const now = new Date();
    const todayStr = `${String(now.getDate()).padStart(2, '0')}.${String(now.getMonth() + 1).padStart(2, '0')}`;
    document.getElementById('date').placeholder = todayStr;

    function showTip(f) {
        if (f === 'deadline') tg.showAlert(`–°–µ–≥–æ–¥–Ω—è: ${todayStr}`);
    }

    function toggleTheme() {
        const isD = document.body.getAttribute('data-theme') === 'dark';
        document.body.setAttribute('data-theme', isD ? 'light' : 'dark');
        document.getElementById('theme-btn').innerText = isD ? '‚òÄÔ∏è' : 'üåô';
        tg.HapticFeedback.impactOccurred('light');
    }

    function update() {
        const type = document.getElementById('type').value,
              count = document.getElementById('count').value, 
              date = document.getElementById('date').value || todayStr,
              price = document.getElementById('price').value, 
              det = document.getElementById('details').value || '–Ω–µ—Ç',
              urg = document.getElementById('urgent').checked;

        document.getElementById('unit-label').innerText = type.includes("–ü—Ä–µ–∑") ? "–ö–æ–ª-–≤–æ —Å–ª–∞–π–¥–æ–≤" : "–ö–æ–ª-–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü";
        
        const preview = document.getElementById('preview');
        if (count && price) {
            preview.classList.add('show');
            let h = urg ? 'üö® –°–†–û–ß–ù–´–ô –ó–ê–ö–ê–ó üö®\n' : '';
            preview.innerText = `${h}1. –í–∏–¥: ${type}\n2. –ö–æ–ª-–≤–æ: ${count}\n3. –î–µ–¥–ª–∞–π–Ω: ${date}\n4. –°—É–º–º–∞: ${price} —Ä—É–±.\n5. –î–µ—Ç–∞–ª–∏: ${det}\n---\n‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É.`;
        } else {
            preview.classList.remove('show');
        }
    }

    function checkSubAndCopy() {
        tg.showConfirm("–í—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –∫–∞–Ω–∞–ª?", (ok) => {
            if (ok) copy();
            else tg.openTelegramLink('https://t.me/txtandpptx');
        });
    }

    async function copy() {
        const c = document.getElementById('count').value, p = document.getElementById('price').value;
        if (!c || !p) { tg.showAlert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è!"); return; }
        const text = document.getElementById('preview').innerText;
        try {
            await navigator.clipboard.writeText(text);
            tg.HapticFeedback.notificationOccurred('success');
            tg.showConfirm("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ! –û—Ç–ø—Ä–∞–≤–∏—Ç—å @awarem?", (ok) => {
                if (ok) tg.openTelegramLink("https://t.me/awarem");
            });
        } catch (e) { tg.showAlert("–û—à–∏–±–∫–∞. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é."); }
    }

    function clearAll() {
        if(confirm("–û—á–∏—Å—Ç–∏—Ç—å?")) {
            document.querySelectorAll('input, textarea').forEach(el => el.value = '');
            document.getElementById('urgent').checked = false; update();
        }
    }

    if (tg.colorScheme === 'dark') {
        document.body.setAttribute('data-theme', 'dark');
        document.getElementById('theme-btn').innerText = 'üåô';
    }
    update();
</script>
</body>
</html>
